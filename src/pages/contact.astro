---
import siteConfig from '../data/site-config';
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
    title="Contacto"
    description="¿Listo para invertir en el crecimiento real de tu tienda PrestaShop? Completa este formulario solo si tienes un presupuesto dedicado y buscas resultados serios y medibles."
    image={siteConfig.image}
>
    <div class="grow w-full min-h-screen flex flex-col items-center justify-center bg-[#FFD43B] dark:bg-black px-4 py-10 sm:py-16">
        <div class="mx-auto w-full max-w-5xl lg:max-w-6xl">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-12">
                <div class="flex flex-col gap-1 justify-center h-full">
                    <div class="min-h-[100px]">
                        <h2 class="font-display text-lg font-semibold text-[#181A2A] dark:text-[#FFD43B]">Solicita una consultoría seria</h2><p
                            class="mt-2 text-sm text-[#181A2A] dark:text-white text-justify"
                        >
                            Este formulario es solo para quienes están listos para invertir en la optimización y crecimiento de su tienda PrestaShop.
                        </p><div
                            class="relative before:absolute after:absolute before:bg-[#181A2A] dark:before:bg-[#FFD43B] after:bg-[#181A2A]/10 dark:after:bg-[#FFD43B]/10 before:bottom-0 before:left-0 before:h-px before:w-6 after:bottom-0 after:right-0 after:left-8 after:h-px mt-6"
                        >
                        </div>
                    </div>
                </div><div class="flex flex-col gap-1 justify-center h-full">
                    <div>
                        <h3 class="text-lg font-semibold text-[#181A2A] dark:text-[#FFD43B]">¿Qué pasa a continuación?</h3><p
                            class="mt-6 text-sm text-[#181A2A] dark:text-white text-justify"
                        >
                            1. Completa el formulario con tus datos y detalles de la tienda.<br />
                            2. Recibirás un correo de confirmación y una invitación a agendar una llamada.<br />
                            3. En la llamada, analizaremos tu tienda y definiremos los próximos pasos.
                        </p>
                    </div>
                </div>
            </div>
            <div class="flex justify-center my-20 lg:my-28 bg-white/80 dark:bg-dark/60 p-10 rounded-2xl shadow-lg">
                <div class="w-full max-w-5xl">
                    <form
                        id="contact-form"
                        name="contact"
                        method="POST"
                        action="https://n8n.cubadevops.com/webhook/contact-form"
                        class="relative z-0"
                        autocomplete="on"
                    >
                        <div class="isolate rounded-2xl">
                            <div class="flex flex-wrap flex-col lg:flex-row gap-0">
                                <div class="flex flex-col w-full lg:w-1/2">
                                    <div class="group relative z-0 transition-all focus-within:z-10 lg:rounded-t-2xl">
                                        <input
                                            id="contact-name"
                                            name="name"
                                            type="text"
                                            autocomplete="name"
                                            placeholder=" "
                                            required=""
                                            class="peer block w-full border border-[#FFD43B] dark:border-[#FFD43B] bg-transparent px-6 pt-12 pb-4 text-base text-[#181A2A] dark:text-white placeholder:text-[#8a7c2f] dark:placeholder:text-[#FFD43B]/60 ring-4 ring-transparent transition focus:border-[#181A2A] dark:focus:border-[#FFD43B] focus:ring-[#181A2A]/10 dark:focus:ring-[#FFD43B]/10 focus:outline-none rounded-t-2xl lg:rounded-tr-none"
                                        /><label
                                            for="contact-name"
                                            class="pointer-events-none absolute top-1/2 left-6 -mt-3 origin-left text-base text-[#8a7c2f] dark:text-[#FFD43B]/80 transition-all duration-200 peer-not-placeholder-shown:-translate-y-4 peer-not-placeholder-shown:scale-75 peer-not-placeholder-shown:font-semibold peer-not-placeholder-shown:text-[#181A2A] dark:peer-not-placeholder-shown:text-[#FFD43B] peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:font-semibold peer-focus:text-[#181A2A] dark:peer-focus:text-[#FFD43B]"
                                            >Nombre completo</label
                                        >
                                    </div>
                                </div><div class="flex flex-col w-full lg:w-1/2">
                                    <div class="group relative z-0 transition-all focus-within:z-10 lg:rounded-t-2xl">
                                        <input
                                            id="contact-email"
                                            name="email"
                                            type="email"
                                            autocomplete="email"
                                            placeholder=" "
                                            required=""
                                            class="peer block w-full border border-[#FFD43B] dark:border-[#FFD43B] bg-transparent px-6 pt-12 pb-4 text-base text-[#181A2A] dark:text-white placeholder:text-[#8a7c2f] dark:placeholder:text-[#FFD43B]/60 ring-4 ring-transparent transition focus:border-[#181A2A] dark:focus:border-[#FFD43B] focus:ring-[#181A2A]/10 dark:focus:ring-[#FFD43B]/10 focus:outline-none lg:rounded-t-2xl lg:rounded-tl-none"
                                        /><label
                                            for="contact-email"
                                            class="pointer-events-none absolute top-1/2 left-6 -mt-3 origin-left text-base text-[#8a7c2f] dark:text-[#FFD43B]/80 transition-all duration-200 peer-not-placeholder-shown:-translate-y-4 peer-not-placeholder-shown:scale-75 peer-not-placeholder-shown:font-semibold peer-not-placeholder-shown:text-[#181A2A] dark:peer-not-placeholder-shown:text-[#FFD43B] peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:font-semibold peer-focus:text-[#181A2A] dark:peer-focus:text-[#FFD43B]"
                                            >Email</label
                                        >
                                    </div>
                                </div><div class="flex flex-col w-full lg:w-1/2">
                                    <div class="group relative z-0 transition-all focus-within:z-10">
                                        <input
                                            id="contact-company"
                                            name="company"
                                            type="text"
                                            autocomplete="organization"
                                            placeholder=" "
                                            required=""
                                            class="peer block w-full border border-[#FFD43B] dark:border-[#FFD43B] bg-transparent px-6 pt-12 pb-4 text-base text-[#181A2A] dark:text-white placeholder:text-[#8a7c2f] dark:placeholder:text-[#FFD43B]/60 ring-4 ring-transparent transition focus:border-[#181A2A] dark:focus:border-[#FFD43B] focus:ring-[#181A2A]/10 dark:focus:ring-[#FFD43B]/10 focus:outline-none lg:rounded-bl-none"
                                        /><label
                                            for="contact-company"
                                            class="pointer-events-none absolute top-1/2 left-6 -mt-3 origin-left text-base text-[#8a7c2f] dark:text-[#FFD43B]/80 transition-all duration-200 peer-not-placeholder-shown:-translate-y-4 peer-not-placeholder-shown:scale-75 peer-not-placeholder-shown:font-semibold peer-not-placeholder-shown:text-[#181A2A] dark:peer-not-placeholder-shown:text-[#FFD43B] peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:font-semibold peer-focus:text-[#181A2A] dark:peer-focus:text-[#FFD43B]"
                                            >Empresa / Tienda</label
                                        >
                                    </div>
                                </div><div class="flex flex-col w-full lg:w-1/2">
                                    <div class="group relative z-0 transition-all focus-within:z-10">
                                        <input
                                            id="contact-message"
                                            name="message"
                                            type="text"
                                            placeholder=" "
                                            required=""
                                            class="peer block w-full border border-[#FFD43B] dark:border-[#FFD43B] bg-transparent px-6 pt-12 pb-4 text-base/6 text-[#181A2A] dark:text-white ring-4 ring-transparent transition focus:border-[#181A2A] dark:focus:border-[#FFD43B] focus:ring-[#181A2A]/10 dark:focus:ring-[#FFD43B]/10 focus:outline-none lg:rounded-br-none"
                                        /><label
                                            for="contact-message"
                                            class="pointer-events-none absolute top-1/2 left-6 -mt-3 origin-left text-base/6 text-[#8a7c2f] dark:text-[#FFD43B]/80 transition-all duration-200 peer-not-placeholder-shown:-translate-y-4 peer-not-placeholder-shown:scale-75 peer-not-placeholder-shown:font-semibold peer-not-placeholder-shown:text-[#181A2A] dark:peer-not-placeholder-shown:text-[#FFD43B] peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:font-semibold peer-focus:text-[#181A2A] dark:peer-focus:text-[#FFD43B]"
                                            >Que espectativas tienes?</label
                                        >
                                    </div>
                                </div><div class="w-full">
                                    <div class="border border-primary px-6 py-8 rounded-b-2xl">
                                        <fieldset>
                                            <legend class="text-base text-black dark:text-[#FFD43B]">Presupuesto estimado para invertir</legend><div
                                                class="mt-6 grid grid-cols-1 gap-8 sm:grid-cols-2"
                                            >
                                                <label class="flex gap-x-3"
                                                    ><input
                                                        class="h-6 w-6 flex-none appearance-none rounded-full border border-[#181A2A]/20 dark:border-[#FFD43B]/40 outline-none checked:border-[0.5rem] checked:border-[#181A2A] dark:checked:border-[#FFD43B] focus-visible:ring-1 focus-visible:ring-[#181A2A] dark:focus-visible:ring-[#FFD43B] focus-visible:ring-offset-2"
                                                        type="radio"
                                                        value="500"
                                                        name="budget"
                                                        required=""
                                                    /><span class="text-base text-[#181A2A] dark:text-[#FFD43B]">500€ – 1.000€</span></label
                                                ><label class="flex gap-x-3"
                                                    ><input
                                                        class="h-6 w-6 flex-none appearance-none rounded-full border border-[#181A2A]/20 dark:border-[#FFD43B]/40 outline-none checked:border-[0.5rem] checked:border-[#181A2A] dark:checked:border-[#FFD43B] focus-visible:ring-1 focus-visible:ring-[#181A2A] dark:focus-visible:ring-[#FFD43B] focus-visible:ring-offset-2"
                                                        type="radio"
                                                        value="1000"
                                                        name="budget"
                                                    /><span class="text-base text-[#181A2A] dark:text-[#FFD43B]">1.000€ – 2.000€</span></label
                                                ><label class="flex gap-x-3"
                                                    ><input
                                                        class="h-6 w-6 flex-none appearance-none rounded-full border border-[#181A2A]/20 dark:border-[#FFD43B]/40 outline-none checked:border-[0.5rem] checked:border-[#181A2A] dark:checked:border-[#FFD43B] focus-visible:ring-1 focus-visible:ring-[#181A2A] dark:focus-visible:ring-[#FFD43B] focus-visible:ring-offset-2"
                                                        type="radio"
                                                        value="2000"
                                                        name="budget"
                                                    /><span class="text-base text-[#181A2A] dark:text-[#FFD43B]">2.000€ – 5.000€</span></label
                                                ><label class="flex gap-x-3"
                                                    ><input
                                                        class="h-6 w-6 flex-none appearance-none rounded-full border border-[#181A2A]/20 dark:border-[#FFD43B]/40 outline-none checked:border-[0.5rem] checked:border-[#181A2A] dark:checked:border-[#FFD43B] focus-visible:ring-1 focus-visible:ring-[#181A2A] dark:focus-visible:ring-[#FFD43B] focus-visible:ring-offset-2"
                                                        type="radio"
                                                        value="5000"
                                                        name="budget"
                                                    /><span class="text-base text-[#181A2A] dark:text-[#FFD43B]">Más de 5.000€</span></label
                                                >
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                            </div><button
                                class="mt-10 inline-flex rounded-full px-6 py-3 text-base font-semibold transition bg-[#181A2A] text-white hover:bg-white hover:text-[#181A2A] hover:border-[#181A2A] focus-visible:ring-4 focus-visible:ring-[#FFD43B]/60 focus:outline-none dark:bg-[#FFD43B] dark:text-[#181A2A] dark:hover:bg-white dark:hover:text-[#181A2A] border border-[#FFD43B] dark:border-[#FFD43B] w-full justify-center"
                                type="submit"><span class="relative top-px">Solicitar consultoría</span></button
                            ><p
                                id="form-success"
                                class="mt-4 text-center text-base font-semibold hidden bg-[#181A2A] text-[#FFD43B] dark:bg-[#FFD43B] dark:text-[#181A2A] rounded-lg py-3"
                            >
                            </p><p
                                id="form-error"
                                class="mt-4 text-center text-base font-semibold hidden bg-red-600 text-white dark:bg-red-400 dark:text-[#181A2A] rounded-lg py-3"
                            >
                            </p>
                        </div>
                        <div id="captcha" class="mt-2"></div>
                    </form>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-12 mb-10">
                <div class="flex flex-col gap-1 justify-center h-full">
                    <div class="min-h-[100px]">
                        <h2 class="font-display text-lg font-semibold text-[#181A2A] dark:text-[#FFD43B]">Contacto y redes</h2><div
                            class="flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-10 mt-6"
                        >
                            <address class="text-sm not-italic text-[#181A2A] dark:text-[#FFD43B] flex items-center gap-2">
                                <strong class="text-[#181A2A] dark:text-light">Email directo</strong><a
                                    href="mailto:info@carlosbatista.dev"
                                    class="hover:underline">info@carlosbatista.dev</a
                                >
                            </address><ul role="list" class="flex gap-x-10 text-[#181A2A] dark:text-[#FFD43B]">
                                <li>
                                    <a
                                        aria-label="GitHub"
                                        class="transition hover:text-black dark:hover:text-white"
                                        href="https://github.com/cbatista8a"
                                        target="_blank"
                                        ><svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 fill-current"
                                            ><path
                                                fill-rule="evenodd"
                                                clip-rule="evenodd"
                                                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844a9.59 9.59 0 0 1 2.504.337c1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.02 10.02 0 0 0 22 12.017C22 6.484 17.522 2 12 2Z"
                                            ></path></svg
                                        ></a
                                    >
                                </li><li>
                                    <a
                                        aria-label="LinkedIn"
                                        class="transition hover:text-black dark:hover:text-white"
                                        href="https://linkedin.com/in/carlosbatista8a"
                                        target="_blank"
                                        ><svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 fill-current"
                                            ><path
                                                d="M19 0h-14c-2.76 0-5 2.24-5 5v14c0 2.76 2.24 5 5 5h14c2.76 0 5-2.24 5-5v-14c0-2.76-2.24-5-5-5zm-11 19h-3v-9h3v9zm-1.5-10.28c-.97 0-1.75-.79-1.75-1.75s.78-1.75 1.75-1.75 1.75.79 1.75 1.75-.78 1.75-1.75 1.75zm13.5 10.28h-3v-4.5c0-1.08-.02-2.47-1.5-2.47-1.5 0-1.73 1.17-1.73 2.38v4.59h-3v-9h2.89v1.23h.04c.4-.75 1.38-1.54 2.84-1.54 3.04 0 3.6 2 3.6 4.59v4.72z"
                                            ></path></svg
                                        ></a
                                    >
                                </li>
                            </ul>
                        </div><div
                            class="relative before:absolute after:absolute before:bg-[#181A2A] dark:before:bg-[#FFD43B] after:bg-[#181A2A]/10 dark:after:bg-[#FFD43B]/10 before:bottom-0 before:left-0 before:h-px before:w-6 after:bottom-0 after:right-0 after:left-8 after:h-px mt-6"
                        >
                        </div>
                    </div>
                </div>
                <div class="flex flex-col gap-1 justify-center h-full">
                    <div>
                        <h2 class="font-display text-lg font-semibold text-[#181A2A] dark:text-[#FFD43B]">¿Aún tienes dudas?</h2><p
                            class="mt-6 text-sm text-[#181A2A] dark:text-white text-justify"
                        >
                            No pasa nada. Prefiero trabajar con clientes comprometidos y con visión de crecimiento. Si solo buscas "ver precios" o no tienes
                            presupuesto definido, te recomiendo primero leer los artículos gratuitos del <a href="/blog" class="font-semibold underline">blog</a> y volver cuando estés listo para invertir en tu
                            tienda.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const form = document.getElementById('contact-form') as HTMLFormElement | null;
            const successMsg = document.getElementById('form-success');
            const errorMsg = document.getElementById('form-error');
            if (form && successMsg && errorMsg) {
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    successMsg.textContent = '';
                    errorMsg.textContent = '';
                    successMsg.classList.add('hidden');
                    errorMsg.classList.add('hidden');
                    const formData = new FormData(form);
                    try {
                        const response = await fetch(form.action, {
                            method: 'POST',
                            body: formData
                        });
                        if (response.ok) {
                            successMsg.textContent = '¡Gracias! Tu mensaje fue enviado correctamente.';
                            successMsg.classList.remove('hidden');
                            errorMsg.classList.add('hidden');
                            form.reset();
                        } else {
                            errorMsg.textContent = 'Ocurrió un error al enviar el formulario. Intenta nuevamente.';
                            errorMsg.classList.remove('hidden');
                            successMsg.classList.add('hidden');
                        }
                    } catch (err) {
                        errorMsg.textContent = 'Ocurrió un error de red. Intenta nuevamente.';
                        errorMsg.classList.remove('hidden');
                        successMsg.classList.add('hidden');
                    }
                });

                window.renderCaptcha = function () {
                    console.debug('captcha rendered');
                    turnstile.render('#captcha', {
                        sitekey: import.meta.env.PUBLIC_CAPTCHA,
                        theme: 'light',
                    });
                }
                document.addEventListener('astro:page-load', () => {
                    if (document.querySelector('#captcha')?.innerHTML === undefined || document.querySelector('#captcha')?.innerHTML === '') {
                        renderCaptcha();
                    }
                })
            }
        </script>
        <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?onload=renderCaptcha" async defer></script>
    </div>
</BaseLayout>
